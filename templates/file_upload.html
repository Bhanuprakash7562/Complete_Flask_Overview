{% extends 'base.html' %}

{% block title %}File Uploader{% endblock %}
{% block context %}
    <h1>file Uploader</h1>
    <form method="post" action="{{ url_for('file_upload')}}" enctype="multipart/form-data">
        <input type="file" name="files" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel, application/pdf, text/plain" required="required">
        <input type="submit" value="Upload">
    </form>

    <h1> Coverts CSV </h1>
    <form method="post" action="{{ url_for('convertcsv')}}" enctype="multipart/form-data">
        <input type="file" name="files" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel", required="required">
        <input type="submit" value="convert">
    </form>

    <h1> Coverts CSV two </h1>
    <form method="post" action="{{ url_for('convertcsv_two')}}" enctype="multipart/form-data">
        <input type="file" name="files" accept="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel", required="required">
        <input type="submit" value="convert">
    </form>

    <h1>Javascript JSON</h1>
    <button id="post_button"> send post request </button>

    <script type="text/Javascript">
        const postButton = document.getElementById('post_button');
        const jsonData = {name:'Bhanu', greeting:'Hello'}
        postButton.addEventListener('click', () => {
            fetch('{{ url_for("handle_post") }}', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json; charset=utf-8'
                },
                body: JSON.stringify(jsonData)
            })
                .then(response => response.json())
                .then(data => console.log('Success:', data))
                .catch((error) => {
                    console.error('Error:' error)
                });
        });
    </script>

{% endblock %}